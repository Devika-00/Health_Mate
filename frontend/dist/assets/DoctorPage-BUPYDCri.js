import{r as a,j as e,L as R,U as S}from"./index-CPlNsI3o.js";import{N as H}from"./navbar-BHmEPp3G.js";import{a as D}from"./axiosService-fZoXDBrJ.js";import{F as Q,a as B}from"./index-DmoHJH3f.js";import{D as J}from"./react-datepicker-C_fXRuwI.js";import"./toaster-B89phBrG.js";import"./index-TrmL613C.js";import"./iconBase-4W9_WsNC.js";import"./axios-Cm0UX6qg.js";import"./index-VWaDGczM.js";import"./format-HzG6idBM.js";import"./parseISO-BGTP3Fcq.js";const O=()=>{const n=[];for(let s=9;s<=17;s++){const l=s>12?s-12:s,i=s+1>12?s-11:s+1,m=s>=12?"PM":"AM",h=s+1>=12?"PM":"AM";n.push({start:`${l}:00 ${m}`,end:`${i}:00 ${h}`})}return n},W=()=>{const[n,s]=a.useState([]),[l,i]=a.useState(""),[m,h]=a.useState(!1),[u,f]=a.useState(""),[c,b]=a.useState(null),[x,j]=a.useState(""),[C,P]=a.useState([]),[o,N]=a.useState(1),[p]=a.useState(8),[$,k]=a.useState(0),[A,v]=a.useState(!1),F=O();a.useEffect(()=>{(async()=>{try{const r=await D.get(`${S}/departments`);if(r.data.success){const y=r.data.allDepartment.filter(d=>d.isListed);P(y);const U=y.map(d=>d.departmentName),w=(await D.get(`${S}/doctors`,{params:{searchQuery:l,department:u,selectedDate:c?c.toISOString():null,selectedTimeSlot:x,page:o,limit:p}})).data.doctors.filter(d=>U.includes(d.department));s(w),k(Math.ceil(w.length/p)),v(l!==""||u!==""||c!==null||x!=="")}else throw new Error("Failed to fetch department details")}catch(r){console.error("Error fetching doctors:",r)}})()},[l,u,c,x,o,p]);const T=t=>{i(t.target.value)},E=()=>{h(!m)},L=t=>{f(t.target.value)},M=t=>{b(t)},_=t=>{j(t.target.value)},I=()=>{i(""),f(""),b(null),j(""),N(1),v(!1)},g=t=>N(t);return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center md:text-left",children:"Find a Doctor"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:justify-between mb-4",children:[e.jsx("div",{className:"relative mb-4 md:mb-0 w-full md:w-1/3",children:e.jsxs("div",{className:`border border-${m?"gray-300":"gray-500"} shadow-lg flex items-center relative rounded-md w-full`,children:[e.jsx("input",{type:"text",placeholder:"Search",value:l,onChange:T,className:"rounded-md px-4 py-2 w-full"}),e.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-700 cursor-pointer",onClick:E,children:e.jsx(Q,{})})]})}),e.jsx("div",{className:"border border-gray-500 shadow-lg rounded-md w-full md:w-1/3 mx-0 md:mx-4 mb-4 md:mb-0",children:e.jsxs("select",{className:"rounded-md px-4 py-2 w-full",value:u,onChange:L,children:[e.jsx("option",{value:"",children:"All Departments"}),C.map(t=>e.jsx("option",{className:"text-gray-700",value:t.departmentName,children:t.departmentName},t._id))]})}),e.jsx("div",{className:"border border-gray-500 shadow-lg rounded-md w-full md:w-1/3 mx-0 md:mx-4 mb-4 md:mb-0",children:e.jsxs("select",{className:"rounded-md px-4 py-2 w-full",value:x,onChange:_,children:[e.jsx("option",{value:"",children:"Select Time Slot"}),F.map((t,r)=>e.jsxs("option",{value:`${t.start} - ${t.end}`,children:[t.start," - ",t.end]},r))]})}),e.jsxs("div",{className:"border border-gray-500 shadow-lg rounded-md w-full md:w-1/3 mx-0 md:mx-4 relative",children:[e.jsx(J,{selected:c,onChange:M,className:"rounded-md px-4 py-2 w-full pl-10",minDate:new Date,placeholderText:"Select Date"}),e.jsx("div",{className:"absolute top-3 left-2 text-gray-700",children:e.jsx(B,{})})]}),A&&e.jsx("button",{className:"ml-4 mt-2 bg-blue-900 hover:bg-blue-800 text-white rounded-md px-4 py-2",onClick:I,children:"Clear Filters"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.map(t=>e.jsx(R,{to:`/user/doctor/${t._id}`,children:e.jsxs("div",{className:"bg-gray-300 shadow-md rounded-lg p-6 cursor-pointer flex flex-col justify-center items-center",children:[e.jsx("img",{src:t.profileImage,alt:"Doctor",className:"w-64 h-64 mx-auto rounded mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-center mb-2",children:t.doctorName}),e.jsx("p",{className:"text-gray-600 text-m font-medium text-center mb-2",children:t.department}),e.jsx("button",{className:"bg-blue-900 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded mt-3",children:"Book Appointment"})]})},t._id))}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("ul",{className:"flex pl-0 list-none rounded my-2",children:Array.from({length:$},(t,r)=>e.jsx("li",{children:e.jsx("button",{className:`${o===r+1?"bg-blue-900 text-white":"text-blue-900 hover:text-blue-700"} cursor-pointer px-3 py-2`,onClick:()=>g(r+1),children:r+1})},r))})}),e.jsxs("div",{className:"flex justify-center mt-4",children:[o>1&&e.jsx("button",{className:"bg-blue-900 text-white py-2 px-4 rounded",onClick:()=>g(o-1),children:"Previous Page"}),n.length===p&&e.jsx("button",{className:"bg-blue-900 text-white py-2 px-4 rounded ml-4",onClick:()=>g(o+1),children:"Next Page"})]})]})},le=()=>e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsx(W,{})]});export{le as default};
