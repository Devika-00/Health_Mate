import{r as j,u as w,a as y,U as x,s as g,j as e,L as c,G as N}from"./index-DMYNC7jJ.js";import{u as v}from"./formik.esm-BZBJ1U5f.js";import{a as h}from"./axios-Cm0UX6qg.js";import{s as i}from"./toaster-CFPCc5bZ.js";import{a as S}from"./validation-DcCHa-Kb.js";import{j as k}from"./index-VWaDGczM.js";const L=()=>{const[n,d]=j.useState(!1),m=w(),u=y(),s=v({initialValues:{email:"",password:""},validate:S,onSubmit:({email:r,password:a})=>{d(!0),h.post(x+"/login",{email:r,password:a}).then(({data:t})=>{const o=t.accessToken,{name:l,role:b,_id:p}=t.user;localStorage.setItem("access_token",o),i(t.message,"success"),u(g({isAuthenticated:!0,name:l,role:b,id:p})),m("/")}).catch(({response:t})=>{var o;d(!1),i((o=t==null?void 0:t.data)==null?void 0:o.message,"error")})}}),f=r=>{h.post(x+"/google_signIn",{user:r}).then(({data:a})=>{const{message:t,user:o,accessToken:l}=a;localStorage.setItem("access_token",l),i(t,"success"),u(g({name:o.name,isAuthenticated:!0,role:o.role,id:o._id})),m("/")}).catch(({response:a})=>i(a.data.message,"error"))};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-xl",children:[e.jsx("h2",{className:"text-3xl font-bold text-center text-blue-900",children:"Login"}),e.jsxs("form",{onSubmit:s.handleSubmit,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email:"}),e.jsx("input",{type:"text",id:"email",className:"w-full mt-1 border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",...s.getFieldProps("email")}),s.errors.email&&s.touched.email&&e.jsx("div",{className:"text-sm text-red-500",children:s.errors.email})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password:"}),e.jsx("input",{type:"password",id:"password",className:"w-full mt-1 border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-blue-500 focus:border-blue-500",...s.getFieldProps("password")}),s.errors.password&&s.touched.password&&e.jsx("div",{className:"text-sm text-red-500",children:s.errors.password}),e.jsx(c,{to:"/user/forgot-password",className:"text-sm text-gray-500 hover:underline mt-2 block text-right",children:"Forgot Password?"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{type:"submit",className:"w-full py-2 text-white bg-blue-900 rounded-lg font-bold hover:bg-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50",disabled:n,children:n?"Submitting...":"Login"}),e.jsx(c,{to:"/doctor/login",className:"mt-4 text-sm font-semibold text-indigo-900 hover:text-indigo-500",children:"Login as Doctor"})]})]}),e.jsxs("p",{className:"text-center text-sm text-gray-700",children:["Don't have an account? ",e.jsx(c,{to:"/user/register",className:"text-blue-500 hover:underline",children:"Create Account"})]}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx(N,{onSuccess:r=>{const a=k(r==null?void 0:r.credential);f(a)},onError:()=>{i("Login Failed","error")}})})]})})},D=()=>e.jsx(L,{});export{D as default};
