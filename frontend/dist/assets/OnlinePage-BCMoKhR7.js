import{r,j as e,L,U as C}from"./index-DvlxLBRP.js";import{N as O}from"./navbar-CHl6ZHU9.js";import{a as P}from"./axiosService-CDsI4QPu.js";import{F as H,a as Q}from"./index-BHqEmgZs.js";import{D as R}from"./react-datepicker-BvA6_nzy.js";import"./toaster-HDMX5aEB.js";import"./index-xu6WTHlj.js";import"./iconBase-ZWK5A-To.js";import"./axios-Cm0UX6qg.js";import"./index-VWaDGczM.js";import"./format-HzG6idBM.js";import"./parseISO-BGTP3Fcq.js";const B=()=>{const c=[];for(let a=9;a<=17;a++){const l=a>12?a-12:a,m=a+1>12?a-11:a+1,u=a>=12?"PM":"AM",f=a+1>=12?"PM":"AM";c.push({start:`${l}:00 ${u}`,end:`${m}:00 ${f}`})}return c},J=()=>{const[c,a]=r.useState([]),[l,m]=r.useState(""),[u,f]=r.useState(!1),[p,j]=r.useState(""),[d,y]=r.useState(null),[x,N]=r.useState(""),[h,$]=r.useState([]),[n,v]=r.useState(1),[i]=r.useState(8),[w,A]=r.useState(0),[T,S]=r.useState(!1),k=B();r.useEffect(()=>{(async()=>{try{const s=await P.get(`${C}/departments`);if(s.data.success){const D=s.data.allDepartment.filter(g=>g.isListed);$(D)}else throw new Error("Failed to fetch department details")}catch(s){console.error("Error fetching department details:",s)}})()},[]),r.useEffect(()=>{const t=async()=>{try{const s=h.map(o=>o.departmentName),g=(await P.get(`${C}/doctors`,{params:{searchQuery:l,department:p,selectedDate:d?d.toISOString():null,selectedTimeSlot:x,page:n,limit:i}})).data.doctors.filter(o=>(o.consultationType==="online"||o.consultationType==="both")&&s.includes(o.department)&&o.isApproved===!0);a(g),A(g.length),S(l!==""||p!==""||d!==null||x!=="")}catch(s){console.error("Error fetching doctors:",s)}};h.length>0&&t()},[l,p,d,x,n,i,h]);const F=t=>{m(t.target.value)},E=()=>{f(!u)},M=t=>{j(t.target.value)},_=t=>{y(t)},I=t=>{N(t.target.value)},U=()=>{m(""),j(""),y(null),N(""),v(1),S(!1)},b=t=>v(t);return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Find a Doctor"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:justify-between mb-4",children:[e.jsx("div",{className:"relative mb-4 md:mb-0 w-full md:w-1/3",children:e.jsxs("div",{className:`border border-${u?"gray-300":"gray-500"} shadow-lg flex items-center relative rounded-md w-full`,children:[e.jsx("input",{type:"text",placeholder:"Search",value:l,onChange:F,className:"rounded-md px-4 py-2 w-full"}),e.jsx("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-700 cursor-pointer",onClick:E,children:e.jsx(H,{})})]})}),e.jsx("div",{className:"border border-gray-500 shadow-lg rounded-md w-full md:w-1/3 mx-0 md:mx-4 mb-4 md:mb-0",children:e.jsxs("select",{className:"rounded-md px-4 py-2 w-full",value:p,onChange:M,children:[e.jsx("option",{value:"",children:"All Departments"}),h.map(t=>e.jsx("option",{className:"text-gray-700",value:t.departmentName,children:t.departmentName},t._id))]})}),e.jsx("div",{className:"border border-gray-500 shadow-lg rounded-md w-full md:w-1/3 mx-0 md:mx-4 mb-4 md:mb-0",children:e.jsxs("select",{className:"rounded-md px-4 py-2 w-full",value:x,onChange:I,children:[e.jsx("option",{value:"",children:"Select Time Slot"}),k.map((t,s)=>e.jsxs("option",{value:`${t.start} - ${t.end}`,children:[t.start," - ",t.end]},s))]})}),e.jsxs("div",{className:"border border-gray-500 shadow-lg rounded-md w-full md:w-1/3 mx-0 md:mx-4 relative",children:[e.jsx(R,{selected:d,onChange:_,className:"rounded-md px-4 py-2 w-full pl-10",minDate:new Date,placeholderText:"Select Date"}),e.jsx("div",{className:"absolute top-3 left-2 text-gray-700",children:e.jsx(Q,{})})]}),T&&e.jsx("button",{className:"ml-4 mt-2 bg-blue-900 hover:bg-blue-800 text-white rounded-md px-4 py-2",onClick:U,children:"Clear Filters"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:c.map(t=>e.jsx(L,{to:`/user/doctor/${t._id}`,children:e.jsxs("div",{className:"bg-gray-300 shadow-md rounded-lg p-6 cursor-pointer flex flex-col justify-center items-center",children:[e.jsx("img",{src:t.profileImage,alt:"Doctor",className:"w-64 h-64 mx-auto rounded mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-center mb-2",children:t.doctorName}),e.jsx("p",{className:"text-gray-600 text-m font-medium text-center mb-2",children:t.department}),e.jsx("button",{className:"bg-blue-900 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded mt-3",children:"Book Appointment"})]})},t._id))}),e.jsx("div",{className:"mt-10 flex justify-center",children:e.jsx("ul",{className:"flex pl-0 list-none rounded my-2",children:Array.from({length:Math.ceil(w/i)},(t,s)=>e.jsx("li",{children:e.jsx("button",{className:`${n===s+1?"bg-blue-900 text-white":"text-blue-900 hover:text-blue-700"} cursor-pointer px-3 py-2`,onClick:()=>b(s+1),children:s+1})},s))})}),e.jsxs("div",{className:"flex justify-center mt-4",children:[n>1&&e.jsx("button",{className:"bg-blue-900 text-white py-2 px-4 rounded",onClick:()=>b(n-1),children:"Previous Page"}),c.length===i&&w>i&&e.jsx("button",{className:"bg-blue-900 text-white py-2 px-4 rounded ml-4",onClick:()=>b(n+1),children:"Next Page"})]})]})},re=()=>e.jsxs(e.Fragment,{children:[e.jsx(O,{}),e.jsx(J,{})]});export{re as default};
