import{r as n,D as f,n as P,p as I,j as e}from"./index-CPlNsI3o.js";import{N as S}from"./navbar-B5G8hyBe.js";import{b as k}from"./index-OEg0w5Iq.js";import{a as E}from"./axiosService-fZoXDBrJ.js";import{s as h}from"./toaster-B89phBrG.js";import{a as R,u as A}from"./uploadImages-YdEkhZ9a.js";import{a as N}from"./axios-Cm0UX6qg.js";import"./iconBase-4W9_WsNC.js";import"./index-VWaDGczM.js";N.defaults.withCredentials=!0;const M=()=>{const[a,s]=n.useState(null),[u,m]=n.useState(null),[,l]=n.useState(!1),[i,g]=n.useState({doctorName:"",gender:"",email:"",age:null,department:"",description:"",experience:"",phoneNumber:"",education:"",status:"pending",imageFile:null,lisenceCertificate:null}),[y,j]=n.useState(null),[v,w]=n.useState(null),[C,x]=n.useState(!1);return n.useEffect(()=>{N.get(f+"/profile",{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}}).then(({data:o})=>{const{doctor:t}=o;s(t),g(r=>({...r,doctorName:t==null?void 0:t.doctorName,age:t==null?void 0:t.age,gender:t==null?void 0:t.gender,department:t==null?void 0:t.department,description:t==null?void 0:t.description,education:t==null?void 0:t.education,email:t==null?void 0:t.email,phoneNumber:t==null?void 0:t.phoneNumber,experience:t==null?void 0:t.experience,lisenceCertificate:t==null?void 0:t.lisenceCertificate,status:t==null?void 0:t.status}))}).catch(()=>h("Oops! Something went wrong","error"))},[]),{profile:a,formData:i,imagePreview:y,certificatePreview:v,error:u,isSubmitting:C,handleInputChange:o=>{const{name:t,value:r}=o.target;let d="";if(t==="imageFile"||t==="lisenceCertificate"){const c=o.target,b=c.files&&c.files[0];if(b){const p=new FileReader;p.onloadend=()=>{t==="imageFile"?j(p.result):w(p.result)},p.readAsDataURL(b),g(F=>({...F,[t]:b}))}}else{if(t==="name")r.trim()?P.test(r)||(d="First letter must be capital and no leading or trailing space"):d="Name is required";else if(t==="age"){const c=parseInt(r,10);(isNaN(c)||c<0)&&(d="Age must be a positive number")}else t==="phoneNumber"&&(r.trim()?I.test(r)||(d="Phone number must have 10 numbers"):d="Phone number is required");g(c=>({...c,[t]:t==="age"?parseInt(r,10):r}))}m(d)},handleSubmit:async()=>{if(!u){x(!0);try{const o=await R(i.imageFile),t=await A(i.lisenceCertificate),r=await E.patch(f+"/profile/edit",{doctorName:i.doctorName,gender:i.gender,age:i.age,phoneNumber:i.phoneNumber,department:i.department,education:i.education,description:i.description,experience:i.experience,profileImage:o||(a==null?void 0:a.profileImage),lisenceCertificate:t||(a==null?void 0:a.lisenceCertificate)},{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`}});h(r.data.message),x(!1)}catch{x(!1),h("Oops! Something went wrong while updating profile","error")}}},handleVerify:()=>{l(!0)}}},W=()=>{const{profile:a,formData:s,imagePreview:u,certificatePreview:m,handleInputChange:l,handleSubmit:i}=M();return e.jsxs(e.Fragment,{children:[e.jsx(S,{}),e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-white",children:e.jsxs("div",{className:"flex flex-col items-center w-full md:w-3/5 lg:w-2/5 justify-center mb-10 mt-9 bg-blue-200 rounded-lg p-6 shadow-lg text-white relative",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:u||((a==null?void 0:a.profileImage)??"https://picsum.photos/200/"),alt:"Profile",className:"w-32 h-32 rounded-full"}),e.jsxs("label",{htmlFor:"profile-image",className:"absolute bottom-0 right-0 bg-white text-blue-900 rounded-full cursor-pointer border-4 border-white px-2 py-1 ",children:[e.jsx("input",{type:"file",id:"profile-image",className:"hidden",accept:"image/*",name:"imageFile",onChange:l}),e.jsx(k,{})]})]}),e.jsxs("div",{className:"bg-white w-full md:w-3/4 p-6 mb-3 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"name",className:"block text-gray-700 font-semibold",children:"Name:"}),e.jsx("input",{type:"text",id:"name",name:"doctorName",value:(s==null?void 0:s.doctorName)??"",onChange:l,className:"border text-gray-700 border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"email",className:"block text-gray-700 font-semibold",children:"Email:"}),e.jsx("input",{type:"email",id:"email",name:"email",value:(s==null?void 0:s.email)??"",className:"border text-gray-700 border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"phoneNumber",className:"block text-gray-700 font-semibold",children:"Phone Number:"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:(s==null?void 0:s.phoneNumber)??"",onChange:l,className:"border text-gray-700 border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"department",className:"block text-gray-700 font-semibold",children:"Department:"}),e.jsxs("select",{id:"department",name:"department",value:(s==null?void 0:s.department)??"",onChange:l,className:"border text-gray-700 border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring focus:border-blue-500",children:[e.jsx("option",{className:"text-gray-700",value:""}),e.jsx("option",{className:"text-gray-700",value:"Cardilogist",children:"Cardiologist"}),e.jsx("option",{className:"text-gray-700",value:"Neurologist",children:"Neurologist"}),e.jsx("option",{className:"text-gray-700",value:"Dermatologist",children:"Dermatologist"}),e.jsx("option",{className:"text-gray-700",value:"Gynecologist",children:"Gynecologist"}),e.jsx("option",{className:"text-gray-700",value:"Physician",children:"Physician"}),e.jsx("option",{className:"text-gray-700",value:"Radiologist",children:"Radiologist"}),e.jsx("option",{className:"text-gray-700",value:"Dentist",children:"Dentist"}),e.jsx("option",{className:"text-gray-700",value:"psychiatrists",children:"psychiatrists"}),e.jsx("option",{className:"text-gray-700",value:"Allergist",children:"Allergist"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"description",className:"block text-gray-700 font-semibold",children:"Description:"}),e.jsx("input",{id:"description",name:"description",value:(s==null?void 0:s.description)??"",onChange:l,className:"border text-gray-700 border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"education",className:"block text-gray-700 font-semibold",children:"Education:"}),e.jsx("input",{type:"text",id:"education",name:"education",value:(s==null?void 0:s.education)??"",onChange:l,className:"border text-gray-700 border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"experience",className:"block text-gray-700 font-semibold",children:"Experience:"}),e.jsx("input",{id:"experience",name:"experience",value:(s==null?void 0:s.experience)??"",onChange:l,className:"border text-gray-700 border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring focus:border-blue-500"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"lisenceCertificate",className:"block text-gray-700 font-semibold",children:"Doctor Lisence Certificate :"}),e.jsx("input",{type:"file",id:"lisenceCertificate",name:"lisenceCertificate",className:"border text-gray-700 border-gray-300 rounded-md px-3 py-2 w-full focus:outline-none focus:ring focus:border-blue-500",onChange:l}),e.jsx("img",{src:m||(a==null?void 0:a.lisenceCertificate),alt:"License Certificate Preview",className:"mt-2 w-full"})]}),e.jsx("p",{className:(s==null?void 0:s.status)==="approved"?"text-green-700 font-bold":(s==null?void 0:s.status)==="rejected"?"text-red-600 font-bold":"text-yellow-600 font-bold",children:""}),e.jsx("button",{className:"bg-blue-900 text-white py-2 px-4 mt-5 ml-5 rounded-md hover:bg-blue-800 focus:outline-none focus:ring focus:border-blue-500",onClick:i,children:"Update Profile"})]})]})})]})};export{W as default};
