import{r as c,u as p,U as m,j as e}from"./index-BYvMFPho.js";import{a as d}from"./axios-Cm0UX6qg.js";import{u as h}from"./formik.esm-CwaWdDf2.js";import{g as u,r as f}from"./Set_Get-jfIHgayU.js";import{s as r}from"./toaster-DoRZrACs.js";const g=()=>{const[o,l]=c.useState(60),a=p(),n=h({initialValues:{otp:""},validate:({otp:s})=>{const t={};return/^\d{6}$/.test(s)||(t.otp="OTP must be exactly 6 digits"),s.trim().length||(t.otp="Required"),t},onSubmit:({otp:s})=>{const t=u("userId");if(t)d.post(m+"/verify_otp",{otp:s,userId:t}).then(({data:i})=>{r(i.message,"success"),f("userId"),setTimeout(()=>a("/user/login"),1e3)}).catch(({response:i})=>{r(i.data.message,"error")});else return r("something went wrong","error"),a("/user/login",{replace:!0})}});c.useEffect(()=>{const s=setInterval(()=>{o>0&&l(t=>t-1)},1e3);return()=>clearInterval(s)},[o]);const x=()=>{l(60);const s=u("userId");if(s)d.post(m+"/resend_otp",{userId:s}).then(({data:t})=>{r(t.message,"success")}).catch(({response:t})=>{r(t.data.message,"error")});else return r("something went wrong","error"),a("/user/login")};return e.jsx("div",{children:e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"w-96 p-8 bg-gray-300 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"font-extrabold text-blue-900 text-3xl ml-20 mb-2",children:"Verify OTP"}),e.jsxs("p",{className:"mt-2 text-xs text-blue-900 ml-12 mb-6",children:["Please enter the OTP that we send to the mail"," "]}),e.jsxs("form",{onSubmit:n.handleSubmit,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"text",id:"otp",className:" mb-4 mt-3 w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:border-blue-500",placeholder:"Enter verification code",...n.getFieldProps("otp")}),n.errors.otp&&n.touched.otp&&e.jsx("p",{className:"text-red-500 mt-1",children:n.errors.otp})]}),e.jsx("button",{type:"submit",className:"bg-blue-900 ml-28 mt-3 hover:bg-blue-800 text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline",children:"Verify"}),e.jsxs("p",{className:"mt-3 ml-20 text-xs text-gray-700",children:["Didn't receive OTP?"," ",e.jsxs("button",{className:"text-blue-500 underline focus:outline-none hover:text-blue-700",onClick:x,disabled:o!==0,children:["Resend OTP",e.jsx("span",{className:"font-medium",children:o!==0&&` (${o}s)`})]})]})]})]})})})},w=()=>e.jsx(g,{});export{w as default};
