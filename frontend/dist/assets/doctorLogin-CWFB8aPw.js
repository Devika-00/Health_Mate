import{r as f,u as j,a as w,D as u,c as g,j as e,L as N,G as y}from"./index-R1ZKGJAc.js";import{D as v}from"./doctor1-BQCmsY7i.js";import{u as k}from"./formik.esm-DOnSARBZ.js";import{a as S}from"./validation-BTYEw9Oz.js";import{s as i}from"./toaster-DiIHPbve.js";import{a as x}from"./axios-Cm0UX6qg.js";import{j as D}from"./index-VWaDGczM.js";const L=()=>{const[c,n]=f.useState(!1),d=j(),m=w(),s=k({initialValues:{email:"",password:""},validate:S,onSubmit:({email:t,password:o})=>{n(!0),x.post(u+"/login",{email:t,password:o}).then(({data:a})=>{const r=a.accessToken,{doctorName:l,role:p,_id:b}=a.doctor;localStorage.setItem("access_token",r),i(a.message,"success"),m(g({isAuthenticated:!0,name:l,role:p,id:b})),setTimeout(()=>{d("/doctor")},1e3)}).catch(({response:a})=>{const{message:r}=a.data;n(!1),i(r,"error")})}}),h=t=>{x.post(u+"/google_signIn",{doctor:t}).then(({data:o})=>{const{message:a,user:r,accessToken:l}=o;localStorage.setItem("access_token",l),i(a,"success"),m(g({isAuthenticated:!0,name:r.doctorName,role:r.role})),d("/doctor")}).catch(({response:o})=>i(o.data.message,"error"))};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-cover bg-center",style:{backgroundImage:`url(${v})`},children:e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-8 mx-4 w-full max-w-md",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-blue-950",children:"Welcome Back!"}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",type:"email",placeholder:"Your Email",...s.getFieldProps("email")}),s.errors.email&&s.touched.email&&e.jsx("div",{className:"text-red-500",children:s.errors.email})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"password",type:"password",placeholder:"Your Password",...s.getFieldProps("password")}),s.errors.password&&s.touched.password&&e.jsx("div",{className:"text-red-500",children:s.errors.password})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{className:"bg-blue-900 hover:bg-blue-700 text-white font-bold py-2 px-8 mt-2 rounded focus:outline-none focus:shadow-outline",type:"submit",disabled:c,children:c?"Logging in...":"Login"})})]}),e.jsxs("p",{className:" mt-3 text-sm text-gray-700 flex justify-center",children:["Don't have an account?"," ",e.jsx(N,{to:"/doctor/register",className:"text-blue-900 underline",children:"Sign Up"})]}),e.jsx("div",{className:"flex justify-center mt-3",children:e.jsx(y,{onSuccess:t=>{const o=D(t==null?void 0:t.credential);h(o)},onError:()=>{i("Google Login Failed","error")}})})]})})},G=()=>e.jsx(L,{});export{G as default};
