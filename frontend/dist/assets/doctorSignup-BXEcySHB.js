import{r as o,u as F,D as C,j as e,L as D,A as k}from"./index-CPlNsI3o.js";import{u as S}from"./formik.esm-CK9aCq9s.js";import{s as d}from"./toaster-B89phBrG.js";import{a as T}from"./axios-Cm0UX6qg.js";import{c as E}from"./validation-Bb3-M1sp.js";import{u as L}from"./uploadImages-YdEkhZ9a.js";import{a as A}from"./axiosService-fZoXDBrJ.js";import{D as I}from"./doctor1-BQCmsY7i.js";import"./index-VWaDGczM.js";const U=()=>{const[l,i]=o.useState(!1),[c,m]=o.useState(null),[p,u]=o.useState([]),x=F(),s=S({initialValues:{name:"",email:"",phoneNumber:"",department:"",consultationType:"",education:"",description:"",experience:"",password:"",confirmPassword:"",lisenceCertificate:null},validate:E,onSubmit:async({name:t,email:a,password:r,phoneNumber:b,department:g,education:f,description:N,experience:y,lisenceCertificate:j,consultationType:w})=>{i(!0);const v=await L(j);T.post(C+"/signup",{doctorName:t,email:a,password:r,phoneNumber:b,department:g,consultationType:w,education:f,description:N,experience:y,lisenceCertificate:v}).then(({data:n})=>{d(n.message,"success"),setTimeout(()=>{x("/doctor/login")},1e3)}).catch(({response:n})=>{const{message:P}=n.data;i(!1),d(P,"error")})}});o.useEffect(()=>{(async()=>{try{const a=await A.get(`${k}/departments`);if(a.data.success)u(a.data.allDepartment);else throw new Error("Failed to fetch doctor details")}catch(a){console.error("Error fetching doctor details:",a)}})()},[]);const h=t=>{if(t.target.files){const a=t.target.files[0];s.setFieldValue("lisenceCertificate",a);const r=new FileReader;r.onload=()=>{m(r.result)},r.readAsDataURL(a)}};return e.jsx("div",{className:"flex items-center justify-center bg-cover bg-center",style:{backgroundImage:`url(${I})`,opacity:100},children:e.jsxs("div",{className:"bg-gray-200 w-4/12 shadow-lg rounded-lg p-10 mt-14 mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center",children:"Sign Up"}),e.jsxs("form",{onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"name",children:"Name"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-3 px-3 text-gray-900 leading-tight focus:outline-none",id:"name",type:"text",placeholder:"Name",...s.getFieldProps("name")}),s.errors.name&&s.touched.name&&e.jsx("div",{className:"text-red-500",children:s.errors.name})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",id:"email",type:"email",placeholder:"Email",...s.getFieldProps("email")}),s.errors.email&&s.touched.email&&e.jsx("div",{className:"text-red-500",children:s.errors.email})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",id:"phoneNumber",type:"text",placeholder:"Phone Number",...s.getFieldProps("phoneNumber")}),s.errors.phoneNumber&&s.touched.phoneNumber&&e.jsx("div",{className:"text-red-500",children:s.errors.phoneNumber})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"department",children:"Department"}),e.jsxs("select",{id:"department",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",...s.getFieldProps("department"),children:[e.jsx("option",{className:"text-gray-700",value:""}),p.map(t=>e.jsx("option",{className:"text-gray-700",value:t.departmentName,children:t.departmentName},t._id))]}),s.errors.department&&s.touched.department&&e.jsx("div",{className:"text-red-500",children:s.errors.department})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"consultationType",children:"Consultation Type"}),e.jsxs("select",{id:"consultationType",className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",...s.getFieldProps("consultationType"),children:[e.jsx("option",{className:"text-gray-700",value:""}),e.jsx("option",{className:"text-gray-700",value:"online",children:"Online Consultation"}),e.jsx("option",{className:"text-gray-700",value:"offline",children:"Offline Consultation"}),e.jsx("option",{className:"text-gray-700",value:"both",children:"Both"})]}),s.errors.consultationType&&s.touched.consultationType&&e.jsx("div",{className:"text-red-500",children:s.errors.consultationType})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"education",children:"Education"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",id:"education",type:"text",placeholder:"Education",...s.getFieldProps("education")}),s.errors.education&&s.touched.education&&e.jsx("div",{className:"text-red-500",children:s.errors.education})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"description",children:"Description"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",id:"description",placeholder:"Description",...s.getFieldProps("description")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"experience",children:"Experience"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",id:"experience",placeholder:"Experience",...s.getFieldProps("experience")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"medicalLicense",children:"Medical License"}),e.jsx("input",{className:"appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",id:"medicalLicense",type:"file",accept:"image/*",onChange:h}),s.errors.lisenceCertificate&&s.touched.lisenceCertificate&&e.jsx("div",{className:"text-red-500",children:s.errors.lisenceCertificate})]}),e.jsx("div",{className:"mb-6",children:c&&e.jsx("img",{src:c,alt:"Medical License Preview",className:"w-full h-auto mb-4"})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"password",children:"Password"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",id:"password",type:"password",placeholder:"Password",...s.getFieldProps("password")}),s.errors.password&&s.touched.password&&e.jsx("div",{className:"text-red-500",children:s.errors.password})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none",id:"confirmPassword",type:"password",placeholder:"Confirm Password",...s.getFieldProps("confirmPassword")}),s.errors.confirmPassword&&s.touched.confirmPassword&&e.jsx("div",{className:"text-red-500",children:s.errors.confirmPassword})]}),e.jsx("div",{className:"mb-6 flex justify-center",children:e.jsx("button",{className:`bg-blue-900 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline ${l?"opacity-50 cursor-not-allowed":""}`,type:"submit",disabled:l,children:l?"Submitting...":"Sign Up"})})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm",children:["Already have an account?"," ",e.jsx(D,{to:"/doctor/login",className:"text-blue-500",children:"Log in"})]})})]})})},q=()=>e.jsx(U,{});export{q as default};
